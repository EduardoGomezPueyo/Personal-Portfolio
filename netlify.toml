[build]
command = "yarn build"
publish = "dist"

[build.environment]
# Cache Cypress binary in local "node_modules" folder so Netlify caches it
CYPRESS_CACHE_FOLDER = "./node_modules/CypressBinary"
# Set TERM variable for Cypress terminal output
TERM = "xterm"

[[plugins]]
package = "netlify-plugin-cypress"
[plugins.inputs.preBuild]
enable = true
start = 'yarn start'
wait-on = 'http://localhost:8080'
wait-on-timeout = '60' # seconds

[[plugins]]
package = "@netlify/plugin-lighthouse"
[plugins.inputs.thresholds]
performance = 0.9
accessibility = 0.9
best-practices = 0.9
seo = 0.9

[plugins.inputs]
output_path = "./lighthouse.html"
